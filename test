import csv
import os
from statistics import median
from datetime import datetime
numbers = []

while len(numbers) < 10:
      lenght = len(numbers) + 1
      raw = input(f"please enter number {lenght} of 10: ")
      try:
       value = float(raw)
       numbers.append(value)
      except ValueError:
            print("Please enter a valid number")

lowest = min(numbers)
highest = max(numbers)
total = sum(numbers)
average = total / len(numbers)
med = median(numbers)
print(f"the lowest number is: {lowest} ")
print(f"the highest number is {highest}")
print(f"the total summ of all number is: {total}")
print(f"the average of all numbers is: {average}")
print(f"the median of all numbers is: {med}")

summary = {
      "timestamp": datetime.now().isoformat(timespec="seconds"),
      "count": len(numbers),
      "min": lowest,
      "max": highest,
      "total": total,
      "average": average,
      "median": med,
}
SUMMARY_FIELDS = ["timestamp", "count", "min", "max", "total", "average", "median"]
path = "results.csv"
write_header = not os.path.exists(path)
with open(path, mode="a", newline="", encoding="utf-8") as f:
      writer = csv.DictWriter(f, fieldnames=SUMMARY_FIELDS)
      if write_header:
        writer.writeheader()
      writer.writerow(summary)

print(f"Saved summary to {path}")